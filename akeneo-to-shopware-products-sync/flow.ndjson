{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"synchronize-products-akeneo-to-shopware-product-incoming","name":"Synchronize Products - Akeneo to Shopware (Product) - Incoming","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"synchronize-products-akeneo-to-shopware-fetch-storage-product-model-alumio-base"}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"synchronize-products-akeneo-to-shopware-fetch-storage-product-model-alumio-base","name":"Synchronize Products - Akeneo to Shopware - Fetch Storage Product Model Alumio Base","object":{"parameters":{"entityType":"base-product","subscriber":{"prototype":"storage-subscriber","parameters":{"storage":"alumio-product-model-parent-alumio-base-product-model"}},"transformers":["synchronize-products-akeneo-fetch-variant-options","akeneo-to-shopware-products-filter-by-previous-storage-entities"]}},"description":"Incoming for fetch products data (Alumio base) from Alumio Storage","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"alumio-product-model-parent-alumio-base-product-model","name":"Alumio - Product Model Parent - Alumio Base Product Model","object":{"parameters":{"path":"alumio-product-model-parent-alumio-base-product-model-01K9SM642XZSQAVRN3GQXJ2MYY","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"entity","identifier":"base-product","name":"Base - Product","object":{"parameters":{"link":"https://schemas.alumio.com/v2/Product.json","schema":{"$ref":"https://schemas.alumio.com/v2/Product.json"},"identifierPath":["code"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"synchronize-products-akeneo-fetch-variant-options","name":"Synchronize Products - Akeneo - Fetch Variant Options","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"attributeSetCode"}}}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"attributeSetCodeVariant"}}}}]}}],"elseCases":[],"transformers":[{"prototype":"merger","parameters":{"template":{"temp":"&{@}"},"transformer":{"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/families/&{attributeSetCode}/variants/&{attributeSetCodeVariant}","method":"GET","payload":[],"plugins":[],"payloadType":"data","authentications":[]}}}}},{"prototype":"pattern-copy","parameters":{"pattern":"temp.variant_attribute_sets.*.axes.*","conditions":[],"replacement":"variant_options.$1$2"}},{"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variant_options"}}}}],"elseTransformers":[]}},{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["temp"]}},"conditions":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"akeneo-http-client","name":"Akeneo - HTTP Client","object":{"prototype":"akeneo-http-client-v2","parameters":{"key":"","baseUri":"${AKENEO_BASE_URL}","advanced":[],"clientId":"${AKENEO_CLIENT_ID}","password":"${AKENEO_PASSWORD}","username":"${AKENEO_USERNAME}","clientSecret":"${AKENEO_CLIENT_SECRET}","enableLogging":true,"loggerFormatter":"full"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-to-shopware-products-filter-by-previous-storage-entities","name":"Akeneo to Shopware - Products - FIlter By Previous storage entities","object":{"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-to-shopware-products-delta-storage","addEntityToStorage":true}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-to-shopware-products-delta-storage","name":"Akeneo to Shopware - Products - Delta Storage","object":{"parameters":{"path":"akeneo-to-shopware-products-delta-storage-01KB4MK9MF7VRCTXE70GTQ5QWK","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"synchronize-products-akeneo-to-shopware-product-route","name":"Synchronize Products - Akeneo to Shopware (Product) - Route","object":{"parameters":{"job":[{"prototype":"run-outgoing","parameters":{"route":"synchronize-products-akeneo-to-shopware-1","numTasks":100,"enableUnlimitedTasks":false}}],"handlers":[],"priority":2,"expression":"*/5 * * * *"}},"description":"","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-products-akeneo-to-shopware-1","name":"Synchronize Products - Akeneo to Shopware","object":{"parameters":{"incoming":"synchronize-products-akeneo-to-shopware-fetch-storage-product-model-alumio-base","outgoing":"shopware-send-product","realtime":false,"transformers":[],"retryStatuses":[],"waitingStatus":false,"parallelExecution":{"maximumProcesses":1}}},"description":"Route for synchronize Products from Alumio base (Storage) and send it to Shopware","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"outgoing-configuration","identifier":"shopware-send-product","name":"Shopware - Send - Product","object":{"parameters":{"publisher":{"prototype":"no-action-publisher","parameters":[]},"transformers":["shopware-product-setup-configurations","shopware-product-convert-from-alumio-base-product-conditional-base-mapping","shopware-product-convert-from-alumio-base-product-conditional-create-payloads","shopware-product-create-or-update"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-setup-configurations","name":"Shopware - Product - Setup Configurations","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":{"name":"Set base Values"},"prototype":"value-setter","parameters":{"configurations":[{"key":"_temp","value":{"default_tax":"Standard rate","default_price":9999,"default_stock":0,"default_currencyCode":"USD"},"mappers":[]}]}},{"meta":{"name":"Set Default Tax"},"prototype":"global-variable-setter","parameters":{"key":"default_tax","value":"&{_temp.default_tax}"}},{"meta":{"name":"Set Default Stock"},"prototype":"global-variable-setter","parameters":{"key":"default_stock","value":"&{_temp.default_stock}"}},{"meta":{"name":"Set default Currency Code"},"prototype":"global-variable-setter","parameters":{"key":"default_currencyCode","value":"&{_temp.default_currencyCode}"}},{"meta":{"name":"Set default Price"},"prototype":"global-variable-setter","parameters":{"key":"default_price","value":"&{_temp.default_price}"}},{"meta":{"name":"Clean up"},"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["_temp"]}},"conditions":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-conditional-base-mapping","name":"Shopware - Product - Convert from Alumio Base Product - Conditional - Base Mapping","object":{"meta":[],"prototype":"chain","parameters":{"transformers":["shopware-product-setup-configurations","shopware-product-convert-from-alumio-base-product-base-mapping-restructure",{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-product-convert-from-alumio-base-product-base-mapping-key","shopware-product-convert-from-alumio-base-product-base-mapping-name","shopware-product-convert-from-alumio-base-product-base-mapping-description-and-meta","shopware-product-convert-from-alumio-base-product-base-mapping-brand-or-manufacturer","shopware-product-convert-from-alumio-base-product-base-mapping-property-group","shopware-product-convert-from-alumio-base-product-base-mapping-customattributes-fetch-property-ids","shopware-product-convert-from-alumio-base-product-base-mapping-categories","shopware-product-convert-from-alumio-base-product-base-mapping-customattributes","shopware-product-convert-from-alumio-base-product-base-mapping-price","shopware-product-convert-from-alumio-base-product-base-mapping-tax","shopware-product-convert-from-alumio-base-product-base-mapping-stock","shopware-product-convert-from-alumio-base-product-base-mapping-finalize"]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variants"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variants.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-product-convert-from-alumio-base-product-base-mapping-key","shopware-product-convert-from-alumio-base-product-base-mapping-name","shopware-product-convert-from-alumio-base-product-base-mapping-price","shopware-product-convert-from-alumio-base-product-base-mapping-tax","shopware-product-convert-from-alumio-base-product-base-mapping-property-group-values-variants","shopware-product-convert-from-alumio-base-product-base-mapping-stock","shopware-product-convert-from-alumio-base-product-base-mapping-finalize-variants"]}}]}}]}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-restructure","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping (Restructure)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"products","value":[],"mappers":[]}]}},{"prototype":"convert-to-array","parameters":{"pattern":"products","recursive":false}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"children"}}}}],"elseCases":[],"transformers":[{"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["children","products"]],"comparator":"equals"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}},"stripEnclosures":true}},{"prototype":"pattern-copy","parameters":{"pattern":"*","conditions":[],"replacement":"parent.$1"}},{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["products"],"root":"parent"}},"conditions":[]}},{"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"parent":true,"products":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}],"elseTransformers":[{"prototype":"pattern-copy","parameters":{"pattern":"*","conditions":[],"replacement":"products.0.$1"}},{"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"parent":true,"products":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-key","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Key","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"productNumber","value":"&{code}","mappers":[]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-lower","parameters":[]},{"prototype":"string-trim","parameters":{"side":"both"}},{"prototype":"string-regex-replace","parameters":{"replace":"-","searchRegex":"{/[\\s\\W-]+/g}"}},{"prototype":"string-regex-replace","parameters":{"replace":"$2","searchRegex":"{/^-+|-+$/g}"}},{"prototype":"string-regex-replace","parameters":{"replace":"-","searchRegex":"{[^A-Za-z0-9_-]+}"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productNumber"}}}},{"prototype":"value-setter","parameters":{"configurations":[{"key":"productNumberLength","value":"&{length(productNumber)}","mappers":[]}]}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productNumberLength"}},"conditions":[{"prototype":"number-greater-than","parameters":{"value":64}}]}}],"elseCases":[],"transformers":[{"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-cut","parameters":{"start":0,"length":56}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productNumber"}}}},{"prototype":"value-setter","parameters":{"configurations":[{"key":"codeHashed","value":"&{code}","mappers":[{"prototype":"string-hash","parameters":{"algo":"md5"}},{"prototype":"string-cut","parameters":{"start":0,"length":8}}]},{"key":"productNumber","value":["&{productNumber}","&{codeHashed}"],"mappers":[{"prototype":"list-implode","parameters":[]}]}]}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-name","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Name","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"name","value":"&{code}","mappers":[]},{"key":"translations.name","value":"&{name}","mappers":[]}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-description-and-meta","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Description and Meta","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"code-transformer","parameters":{"code":"function extractCustomAttributesWithPriority(data) {\n  const priorityLocales = ['en_US', 'en_GB', 'fr_FR', 'de_DE'];\n  const mergedAttributes = {};\n\n  for (const locale of priorityLocales) {\n    for (const entry of data) {\n      if (entry.localeCode !== locale || !entry.customAttributes) continue;\n\n      const attributes = entry.customAttributes;\n\n      for (const key in attributes) {\n        // Only assign if not already filled by a higher-priority locale\n        if (!(key in mergedAttributes)) {\n          mergedAttributes[key] = attributes[key];\n        }\n      }\n    }\n  }\n\n  return mergedAttributes;\n}\n\n// Example \nconst extracted = extractCustomAttributesWithPriority(data);\n\nreturn extracted;","source":"&{localizations}","destination":"temp.descriptionMeta"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"description","value":"&{temp.descriptionMeta.description || ``}","mappers":[]},{"key":"translations.description","value":"&{temp.descriptionMeta.description || ``}","mappers":[]},{"key":"metaTitle","value":"&{temp.descriptionMeta.meta_title || ``}","mappers":[]},{"key":"translations.metaTitle","value":"&{temp.descriptionMeta.meta_title || ``}","mappers":[]},{"key":"translations.metaDescription","value":"&{temp.descriptionMeta.meta_description || ``}","mappers":[]},{"key":"metaDescription","value":"&{temp.descriptionMeta.meta_description || ``}","mappers":[]},{"key":"keywords","value":"&{temp.descriptionMeta.meta_keywords || ``}","mappers":[]}]}},{"prototype":"pattern-copy","parameters":{"pattern":"temp.descriptionMeta.*","conditions":[],"replacement":"customAttributes.$1"}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-brand-or-manufacturer","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Brand or Manufacturer","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"manufacturerId":"&{data[0].id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/search/product-manufacturer","method":"POST","payload":{"page":1,"limit":1,"filter":[{"type":"equalsAny","field":"name","value":"&{brand || customAttributes.brand || `Generic`}"}]},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"manufacturerId"}},"conditions":[{"prototype":"equals","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"manufacturerId":"&{data.id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/product-manufacturer?_response=basic","method":"POST","payload":{"name":"&{brand || customAttributes.brand || `Generic`}"},"plugins":[],"payloadType":"data","authentications":[]}}}}}],"elseTransformers":[]}}]}},{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["temp"]}},"conditions":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"shopware6-http-client","name":"Shopware6 - HTTP Client","object":{"prototype":"shopware6-v2-http-client","parameters":{"key":"","baseUrl":"${SHOPWARE6_BASE_URL}","advanced":{"client":"default"},"clientId":"${SHOPWARE6_CLIENT_ID}","clientSecret":"${SHOPWARE6_CLIENT_SECRET}","enableLogging":true,"authenticationType":"client_credentials"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-property-group","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Property Group","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"variant_options.*","conditions":[],"replacement":"variant_options.$1.code"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variant_options.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"id":"&{data[0].id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/search/property-group","method":"POST","payload":{"filter":[{"type":"equals","field":"name","value":"&{code}"}]},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"id":"&{data.id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/property-group?_response=basic","method":"POST","payload":{"name":"&{code}","filterable":true,"description":"&{code}","displayType":"text","sortingType":"alphanumeric"},"plugins":[],"payloadType":"data","authentications":[]}}}}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"variant_options.*.id","conditions":[],"replacement":"properties.$1.id"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"configuratorGroupConfig","value":"&{properties || `[]`}","mappers":[]}]}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"variant_options":"&{variant_options || `[]`}"},"childrenPattern":"variants.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"configuratorGroupConfig.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"expressionForListings","value":true,"mappers":[]}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-customattributes-fetch-property-ids","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - CustomAttributes - Fetch property IDs","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-copy","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"customAttributes"}},"destination":{"prototype":"structure","parameters":{"key":"code","keys":[],"root":"temp","value":"value"}},"stripEnclosures":false}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temp.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value"}},"conditions":[{"prototype":"type-array","parameters":{"strict":true}}]}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value.0"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"type-string","parameters":[]},{"prototype":"type-boolean","parameters":[]},{"prototype":"type-numeric","parameters":[]},{"prototype":"type-integer","parameters":[]},{"prototype":"type-float","parameters":[]}]}}]}}]}}],"elseCases":[],"transformers":[{"prototype":"pattern-move","parameters":{"pattern":"value.*","conditions":[],"replacement":"value.$1.value"}},{"prototype":"value-setter","parameters":{"configurations":[{"key":"type","value":"multiple","mappers":[]}]}},{"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"code":"&{code}"},"childrenPattern":"value.*"}}],"elseTransformers":[]}}]}},{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"temp_multiple","value":"&{temp[?type==`multiple`]}","mappers":[]}]}},{"prototype":"pattern-move","parameters":{"pattern":"temp_multiple.*.value.*","conditions":[],"replacement":"temp_multiple.$1$2"}},{"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temp_multiple"}}}},{"prototype":"value-setter","parameters":{"configurations":[{"key":"temp_multiple","value":"&{temp_multiple[?type!=`multiple`]}","mappers":[]}]}},{"prototype":"value-setter","parameters":{"configurations":[{"key":"temp","value":["&{temp}","&{temp_multiple}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}}]}},{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"temp.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopware-property-group-options","storageKey":"&{code}::&{value}","destination":"id"}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"temp.*.id","conditions":[{"prototype":"not-empty","parameters":[]}],"replacement":"properties.$1.id"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"properties"}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["tempX","temp_multiple"]}},"conditions":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-property-group-options","name":"Shopware - Property group - Options - Attribute and Option code to id","object":{"parameters":{"path":"shopware-property-group-options-01KB59PZH1SXQ3TVDWES3VKQDN","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-categories","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Categories","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"categories.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopware-category-code-to-id","storageKey":"&{categoryCode}","destination":"id"}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"id"}}}}],"elseCases":[],"transformers":[{"prototype":"merger","parameters":{"template":{"id":"&{data[0].id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/search/category","method":"POST","payload":{"filter":[{"type":"equals","field":"name","value":"&{categoryCode}"}]},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"prototype":"merger","parameters":{"template":{"id":"&{data.id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/category?_response=basic","method":"POST","payload":{"name":"&{categoryCode}"},"plugins":[],"payloadType":"data","authentications":[]}}}}}],"elseTransformers":[]}}],"elseTransformers":[]}},{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["categoryCode"]}},"conditions":[]}}]}},{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"categories","value":"&{categories[?id!=`0`]}","mappers":[]}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-category-code-to-id","name":"Shopware - Category - Code to id","object":{"parameters":{"path":"shopware-category-code-to-id-01KA907G8WDHH4QK1NZHF3ABCC","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-customattributes","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - CustomAttributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"customAttributes.*","conditions":[],"replacement":"customFields.$1"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"attributeSetCodeVariant","conditions":[],"replacement":"customFields.attributeSetCodeVariant"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"attributeSetCode","conditions":[],"replacement":"customFields.attributeSetCode"}},{"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"conditional","parameters":{"mappers":[{"prototype":"serialize","parameters":{"serializer":{"prototype":"json","parameters":{"flags":[]}}}}],"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"type-array","parameters":{"strict":false}},{"prototype":"type-object","parameters":[]}]}}]}},{"prototype":"cast-string","parameters":[]}],"accessor":{"prototype":"key","parameters":{"keys":[],"root":"customFields"}}}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-price","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Price","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"prices"}}}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"prices","value":[{"amount":"@{globals.default_price}","linked":true,"currencyCode":"@{globals.default_currencyCode}"}],"mappers":[]}]}}]}}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"prices"}}}}],"transformers":[{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"prices.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["amount","net"]],"comparator":"equals"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}},"stripEnclosures":true}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"net","value":"&{net}","mappers":[{"prototype":"cast-float","parameters":[]}]},{"key":"gross","value":"&{net}","mappers":[{"prototype":"cast-float","parameters":[]}]},{"key":"linked","value":true,"mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"currencyId":"&{data[0].id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/search/currency","method":"POST","payload":{"page":1,"limit":1,"filter":[{"type":"equalsAny","field":"isoCode","value":"&{currencyCode}"}]},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["prices","price"]],"comparator":"equals"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}},"stripEnclosures":true}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"price.*.currencyCode"}},"conditions":[]}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"price","value":"&{price[?currencyId!=`0`]}","mappers":[]}]}}]}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-tax","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Tax","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"taxId":"&{data[0].id || `0`}","taxRate":"&{data[0].attributes.taxRate || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/search/tax","method":"POST","payload":{"filter":[{"type":"equals","field":"name","value":"@{globals.default_tax}"}]},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"taxRate"}},"conditions":[{"prototype":"not-equals","parameters":{"value":0}}]}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"price.0"}}}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"taxTotal","value":["&{price[0].net}","&{taxRate || `0`}"],"mappers":[{"prototype":"operator","parameters":{"operator":"multiplication"}}]},{"key":"taxTotal","value":["&{taxTotal || `0`}",100],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}}]},{"key":"price.0.net","value":["&{price[0].net}","&{taxTotal}"],"mappers":[{"prototype":"operator","parameters":{"operator":"subtraction"}}]}]}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-stock","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Stock","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"variants"}}}}],"elseCases":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"stock","value":"@{globals.default_stock || `0`}","mappers":[]}]}}],"elseTransformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"stock","value":0,"mappers":[]}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-finalize","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - FInalize","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"name":true,"price":true,"stock":true,"taxId":true,"variants":true,"metaTitle":true,"categories":true,"properties":true,"description":true,"customFields":true,"translations":true,"productNumber":true,"manufacturerId":true,"configuratorGroupConfig":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"properties"}},"conditions":[{"prototype":"empty","parameters":[]}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"properties"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"configuratorGroupConfig"}},"conditions":[{"prototype":"empty","parameters":[]}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"configuratorGroupConfig"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"price"}},"conditions":[{"prototype":"empty","parameters":[]}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"price"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"or-condition","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variants"}},"conditions":[{"prototype":"empty","parameters":[]}]}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"variants"}}}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"configuratorGroupConfig"}]}}],"elseTransformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"properties"}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-property-group-values-variants","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - Property Group Values (Variants)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"code-transformer","parameters":{"code":"// Data is available in the \"data\" variable. Returned data will be set in the \"destination\" path.\n\nconst results = data.variant_options.map(option => {\n  return {\n    id: option.id,\n    key: option.code,\n    value: data.customAttributes.hasOwnProperty(option.code)\n      ? data.customAttributes[option.code]\n      : null\n  };\n});\n\nreturn results;","source":"&{@}","destination":"properties"}}]}},{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"code-transformer","parameters":{"code":"function normalizeValue(value) {\n  // If value is an array of objects\n  if (Array.isArray(value) && typeof value[0] === 'object') {\n    return value.map(obj => {\n      const parts = Object.values(obj).filter(v => typeof v === 'string');\n      return parts.join('-');\n    });\n  }\n\n  // If value is a single object\n  if (typeof value === 'object' && value !== null) {\n    const parts = Object.values(value).filter(v => typeof v === 'string');\n    return parts.join('-');\n  }\n\n  // If value is an array of strings\n  if (Array.isArray(value) && value.every(v => typeof v === 'string')) {\n    return value;\n  }\n\n  // If value is a string\n  if (typeof value === 'string') {\n    return value;\n  }\n\n  // Any other type (number, etc.)\n  return value;\n}\n\ndata.forEach((item) => {\n  item.value = normalizeValue(item.value);\n\n});\n\nreturn data;","source":"&{properties}","destination":"properties"}}]}},{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"properties.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"pattern-move","parameters":{"pattern":"id","conditions":[],"replacement":"propertyId"}},{"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopware-property-group-options","storageKey":"&{key}::&{value}","destination":"id"}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"id"}}}}],"elseCases":[],"transformers":[{"prototype":"merger","parameters":{"template":{"id":"&{data[0].id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"api/search/property-group/&{propertyId}/options","method":"POST","payload":{"filter":[{"type":"equals","field":"name","value":"&{value}"}]},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"id":"&{data.id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"api/property-group/&{propertyId}/options?_response=basic","method":"POST","payload":{"name":"&{value}"},"plugins":[],"payloadType":"data","authentications":[]}}}}}],"elseTransformers":[]}}],"elseTransformers":[]}},{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["value","propertyId","key"]}},"conditions":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-base-mapping-finalize-variants","name":"Shopware - Product - Convert from Alumio Base Product - Base Mapping - FInalize Variants","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"name":true,"price":true,"stock":true,"parentId":true,"properties":true,"productNumber":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"price"}},"conditions":[{"prototype":"empty","parameters":[]}]}}],"elseCases":[],"transformers":[{"prototype":"value-remover","parameters":{"patterns":[{"key":"price"}]}}],"elseTransformers":[]}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"properties"}},"conditions":[{"prototype":"empty","parameters":[]}]}}],"elseCases":[],"transformers":[{"prototype":"value-remover","parameters":{"patterns":[{"key":"properties"}]}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-conditional-create-payloads","name":"Shopware - Product - Convert from Alumio Base Product - Conditional - create payloads","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"*","conditions":[],"replacement":"payload.$1"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["variants"],"root":"payload"}},"conditions":[]}},{"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-product-convert-from-alumio-base-product-conditional-check-ids"]}}]}},{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*.variants.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-product-convert-from-alumio-base-product-conditional-check-ids"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-convert-from-alumio-base-product-conditional-check-ids","name":"Shopware - Product - Convert from Alumio Base Product - Conditional - check ID's","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"id":"&{data[0].id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/search/product","method":"POST","payload":{"page":1,"limit":1,"filter":[{"type":"equalsAny","field":"productNumber","value":"&{productNumber}"}]},"plugins":[],"payloadType":"data","authentications":[]}}}}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["id"]}},"conditions":[]}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-create-or-update","name":"Shopware - Product - Create or Update","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-product-create-or-update-send"]}}]}},{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*.variants.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-product-create-or-update-send"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-product-create-or-update-send","name":"Shopware - Product - Create or Update - Send","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"id":"&{data.id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/product?_response=basic","method":"POST","payload":"&{payload || @}","plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variants"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"parentId":"&{id}"},"childrenPattern":"variants.*"}}],"elseTransformers":[]}}],"elseTransformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"id":"&{data.id || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/product/&{id}?_response=basic","method":"PATCH","payload":"&{payload || @}","plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variants"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"parentId":"&{id}"},"childrenPattern":"variants.*"}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"synchronize-products-akeneo-to-shopware-simple-product-incoming","name":"Synchronize Products - Akeneo to Shopware (Simple Product) - Incoming","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"akeneo-fetch-simple-products-or-products-without-parent"}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"akeneo-fetch-simple-products-or-products-without-parent","name":"Akeneo - Fetch - Simple products or products without parent","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/products?limit=100&pagination_type=search_after&search=&{search}","payload":"&{@}","plugins":[],"serializer":{"prototype":"json","parameters":{"flags":[]}},"payloadType":"data","authentications":[]},"pagination":{"prototype":"next","parameters":{"pattern":"_links.next","pageLimit":10000}},"transformer":{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"search","value":{"parent":[{"operator":"EMPTY"}]},"mappers":[{"prototype":"serialize-json","parameters":{"flags":[]}}]}]}},"deserializer":{"prototype":"json","parameters":{"pattern":"_embedded.items","readMethod":"wholeFile","encodeInput":false}},"requestListeners":[]}},"transformers":["akeneo-prepare-convert-values-to-localizations-and-custom-attributes","akeneo-prepare-convert-localizations-filter","akeneo-prepare-convert-product-and-product-model-categories-to-alumio-base","akeneo-prepare-convert-product-and-product-model-prices-to-alumio-base","akeneo-convert-product-to-alumio-base-product","synchronize-products-akeneo-fetch-variant-options","akeneo-filter-simple-product"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-values-to-localizations-and-custom-attributes","name":"Akeneo - Prepare convert - Values - To localizations and custom attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attribute_type"}},"conditions":[{"prototype":"equals","parameters":{"value":"pim_catalog_image"}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"_links"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"combinedKey","value":"locale:?{locale}|scope:?{scope}","mappers":[]}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"attribute_type"},{"key":"reference_data_name"}]}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"structure","parameters":{"key":"combinedKey","keys":[],"value":"\"\""}},"destination":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values.*.*","conditions":[],"replacement":"values.$2.$1"}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"values"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"values.*.*.combinedKey"}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*.data","conditions":[],"replacement":"customAttributes.$1"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*.scope","conditions":[],"replacement":"channelCode"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*.locale","conditions":[],"replacement":"localeCode"}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values.\"locale:|scope:\".customAttributes","conditions":[],"replacement":"customAttributes"}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values"}}}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values","conditions":[],"replacement":"localizations"}}]}}]}},"description":"This transformer will convert localizations data from Akeneo.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-localizations-filter","name":"Akeneo - Prepare Convert - Localizations filter","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"localizations"}},"nodeFilters":[{"prototype":"or-condition","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"channelCode"}}}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"channelCode"}},"conditions":[{"prototype":"one-of","parameters":{"value":["ecommerce"]}}]}}]}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"channelCode"}}}}]}}],"nodeTransformers":[]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localizations"}}}}]}}]}},"description":"We use this transformer to only allow any localization with channel code in **\"eCommerce\"**, if it has channel code.\n\nIf you need other channel code please add the value in the Node Filter.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-product-and-product-model-categories-to-alumio-base","name":"Akeneo - Prepare convert - Product and product model - Categories to Alumio Base","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"categories"}},"destination":{"prototype":"structure","parameters":{"key":"temp","keys":[],"root":"categories","value":"categoryCode"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"categories"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temp"}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"categories"}}}}]}}]}},"description":"Akeneo - Prepare convert - Product and product model - Categories to Alumio Base","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-product-and-product-model-prices-to-alumio-base","name":"Akeneo - Prepare convert - Product and product model - Prices to Alumio Base","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"customAttributes.price","conditions":[],"replacement":"prices"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"prices.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"currency","conditions":[],"replacement":"currencyCode"}}]}}]}},"description":"Akeneo - Prepare convert - Product and product model - Prices to Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-product-to-alumio-base-product","name":"Akeneo - Convert - Product - To Alumio Base product","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"code","value":"&{customAttributes.sku || identifier}","mappers":[]}]}},{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["parent","parentCode"],["enabled","statusCode"],["family","attributeSetCode"]],"comparator":"equals"}}],"accessor":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"uuid"},{"key":"_links"},{"key":"created"},{"key":"updated"},{"key":"associations"},{"key":"quantified_associations"},{"key":"metadata"}]}}]}}]}},"description":"This transformer will convert Akeneo product data into Alumio base product data.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-filter-simple-product","name":"Akeneo - Filter - Simple Product","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"type-setter","parameters":{"entityType":"base-product"}},{"meta":[],"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-filter-simple-products","addEntityToStorage":true}}]}},"description":"We use this transformer to filter previously created into task simple product to avoid duplication.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-filter-simple-products","name":"Akeneo - Filter - Simple Products","object":{"parameters":{"path":"akeneo-filter-simple-products-01KB4KN5F0YX3MVDR8SNX4VXY9","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"synchronize-products-akeneo-to-shopware-simple-product-route","name":"Synchronize Products - Akeneo to Shopware (Simple Product) - Route","object":{"parameters":{"job":[{"prototype":"run-outgoing","parameters":{"route":"synchronize-products-akeneo-to-shopware-simple-product","numTasks":100,"enableUnlimitedTasks":false}}],"handlers":[],"priority":2,"expression":"*/5 * * * *"}},"description":"","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-products-akeneo-to-shopware-simple-product","name":"Synchronize Products - Akeneo to Shopware (Simple Product)","object":{"parameters":{"incoming":"akeneo-fetch-simple-products-or-products-without-parent","outgoing":"shopware-send-product","realtime":false,"transformers":[],"retryStatuses":[],"waitingStatus":false,"parallelExecution":{"maximumProcesses":1}}},"description":"Route for synchronize Simple Products from Akeneo and send it to Shopware","owner":null,"disabled":false}