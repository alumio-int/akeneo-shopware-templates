{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"akeneo-fetch-attributes","name":"Akeneo - Fetch - Attributes","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"akeneo-fetch-attributes"}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"akeneo-fetch-attributes","name":"Akeneo - Fetch - Attributes","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/attributes?limit=100","payload":[],"plugins":[],"payloadType":"data","authentications":[]},"pagination":{"prototype":"next","parameters":{"pattern":"_links.next","pageLimit":10000}},"deserializer":{"prototype":"json","parameters":{"pattern":"_embedded.items","readMethod":"wholeFile","encodeInput":false}},"requestListeners":[]}},"transformers":["akeneo-prepare-convert-labels-to-localizations","akeneo-check-and-fetch-attribute-options","akeneo-convert-attribute-to-alumio-base-attribute","akeneo-map-type-code-to-alumio-base-code","akeneo-filter-previous-attribute"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"akeneo-http-client","name":"Akeneo - HTTP Client","object":{"prototype":"akeneo-http-client-v2","parameters":{"key":"","baseUri":"${AKENEO_BASE_URL}","advanced":[],"clientId":"${AKENEO_CLIENT_ID}","password":"${AKENEO_PASSWORD}","username":"${AKENEO_USERNAME}","clientSecret":"${AKENEO_CLIENT_SECRET}","enableLogging":true,"loggerFormatter":"full"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-labels-to-localizations","name":"Akeneo - Prepare convert - Labels - To localizations","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"labels"}},"destination":{"prototype":"structure","parameters":{"key":"localeCode","keys":[],"root":"localizations","value":"translation"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"labels"}]}}]}},"description":"Change labels from Akeneo into Alumio Base localizations","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-check-and-fetch-attribute-options","name":"Akeneo  - Check and fetch - Attribute options","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type"}},"conditions":[{"prototype":"one-of","parameters":{"value":["pim_catalog_simpleselect","pim_catalog_multiselect"]}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"type"}},"conditions":[{"prototype":"one-of","parameters":{"value":["akeneo_reference_entity","akeneo_reference_entity_collection"]}}]}},"transformer":{"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-convert-attribute-options-from-entity-records-to-alumio-base-attribute-options"]}}}],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-fetch-and-convert-attribute-options-to-alumio-base-attribute-options"]}}],"elseTransformers":[]}}]}},"description":"Fetch the attribute options when the attribute is simple select or multiselect.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-attribute-options-to-alumio-base-attribute-options","name":"Akeneo - Fetch and convert - Attribute Options - To Alumio Base Attribute Options","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/attributes/&{code}/options","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"options","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-prepare-convert-labels-to-localizations","akeneo-convert-attribute-option-alumio-base-attribute-option"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-option-alumio-base-attribute-option","name":"Akeneo - Convert - Attribute Option - Alumio Base Attribute Option","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["identifier","code","localizations"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-fetch-and-convert-attribute-options-from-entity-records-to-alumio-base-attribute-options","name":"Akeneo - Fetch and convert - Attribute Options - From entity records to Alumio Base Attribute Options","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"limit","value":100,"mappers":[]},{"key":"endpoint","value":"/api/rest/v1/reference-entities/&{reference_data_name}/records","mappers":[]}]}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}","total":"&{items_count || `0`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"limit":"&{limit}","with_count":"true"},"plugins":[],"payloadType":"data","authentications":[]}}}}}]}},{"meta":{"name":"Build Pagination"},"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"total_page","value":["&{total}","&{limit}"],"mappers":[{"prototype":"operator","parameters":{"operator":"division"}},{"prototype":"cast-int","parameters":[]}]},{"key":"newData","value":"&{total_page}","mappers":[{"prototype":"cast-int","parameters":[]}]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-fill","parameters":{"start":0,"length":"&{@}"}}],"accessor":{"prototype":"key","parameters":{"keys":["newData"]}}}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"newData"}},"destination":{"prototype":"structure","parameters":{"key":"index","keys":[],"root":"newData","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"limit":"&{limit}","endpoint":"&{endpoint}"},"childrenPattern":"newData.*"}}]}}]}},{"meta":{"name":"Pagination - Execute next page"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newData.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-int","parameters":[]},{"prototype":"prepared-operator","parameters":{"left":null,"right":[2],"operator":"addition"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"index"}}}},{"meta":[],"prototype":"merger","parameters":{"template":{"data":"&{_embedded.items || `[]`}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-http-client","request":{"uri":"&{endpoint}","payload":{"page":"&{index}","limit":"&{limit}","with_count":"true"},"plugins":[{"prototype":"logger","parameters":{"formatter":"simple"}}],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["limit","index","total"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"newArray","value":["&{notFound || `[]`}","&{notFound || `[]`}"],"mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"newData.*.data.*","conditions":[],"replacement":"newArray.$1.$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"newArray"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"options","value":["&{data}","&{newArray}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["data","newArray"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["akeneo-convert-attribute-option-from-akeneo-entity-records-to-alumio-base-attribute-option"]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-option-from-akeneo-entity-records-to-alumio-base-attribute-option","name":"Akeneo - Convert - Attribute Option - From Akeneo Entity Records to Alumio Base Attribute Option","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.label.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"locale","conditions":[],"replacement":"localeCode"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"data","conditions":[],"replacement":"translation"}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"channel"}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values.label.*","conditions":[],"replacement":"localizations.$1"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["code","localizations"]}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-attribute-to-alumio-base-attribute","name":"Akeneo - Convert - Attribute - To Alumio Base Attribute","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"type","conditions":[],"replacement":"typeCode"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"not-one-of","parameters":{"value":["identifier","isSuper","code","typeCode","options","localizations","localizable","is_mandatory"]}}]}}]}}]}},"description":"This transformer will convert the attribute structure into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-map-type-code-to-alumio-base-code","name":"Akeneo - Map - Type code - To Alumio Base code","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-replace","parameters":{"search":"pim_catalog_"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}}}}]}},"description":"This transformer will convert the attribute code value into Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-filter-previous-attribute","name":"Akeneo - Filter previous - Attribute","object":{"prototype":"chain","parameters":{"transformers":[{"prototype":"type-setter","parameters":{"entityType":"base-attribute"}},{"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-filter-previous-attributes","addEntityToStorage":true}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"entity","identifier":"base-attribute","name":"Base - Attribute","object":{"parameters":{"schema":[],"identifierPath":["code"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-filter-previous-attributes","name":"Akeneo - Filter previous - Attributes","object":{"parameters":{"path":"akeneo-filter-previous-attributes-01KA1BMD0VE1CBPEDGTTJ4H9ZR","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"shopware-send-property-group-or-custom-field","name":"Shopware - Send - Property Groups or Custom Fields","object":{"parameters":{"job":[{"prototype":"run-outgoing","parameters":{"route":"synchronize-property-group-or-custom-field-from-akeneo-attribute","numTasks":1000,"enableUnlimitedTasks":false}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-property-group-or-custom-field-from-akeneo-attribute","name":"Synchronize Property Group or Custom Field - from Akeneo Attribute","object":{"parameters":{"incoming":"akeneo-fetch-attributes","outgoing":"shopware-send-property-group-or-custom-field","realtime":false,"transformers":[],"retryStatuses":[],"waitingStatus":false,"parallelExecution":{"maximumProcesses":1}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"outgoing-configuration","identifier":"shopware-send-property-group-or-custom-field","name":"Shopware - Send - Property Group or Custom Field","object":{"parameters":{"publisher":{"prototype":"no-action-publisher","parameters":[]},"transformers":["shopware-check-and-send-property-group-or-custom-field"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-check-and-send-property-group-or-custom-field","name":"Shopware - Check and send - Property Group or Custom Field","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}},"conditions":[{"prototype":"one-of","parameters":{"value":["textarea","text","number","metric","boolean","date"]}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"typeCode"}},"conditions":[{"prototype":"one-of","parameters":{"value":["simpleselect","multiselect","akeneo_reference_entity","akeneo_reference_entity_collection"]}}]}},"transformer":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-prepare-convert-translations-from-alumio-base-localizations","shopware-prepare-convert-property-group-options-from-alumio-base-attribute-options","shopware-convert-property-group-from-alumio-base-attribute","shopware-check-and-send-property-group"]}}]}}}],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-convert-config-label-from-alumio-base-localizations"]}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"field","value":{"name":"&{code}","type":"text","config":"&{config}"},"mappers":[]}]}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-custom-field-set-create-and-send"]}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-convert-config-label-from-alumio-base-localizations","name":"Shopware - Convert - Config label - from Alumio Base Localizations","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"localizations"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-replace","parameters":{"search":"_","replace":"-"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localeCode"}}}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"structure","parameters":{"key":"localeCode","keys":[],"root":"localizations","value":"translation"}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"config.label"}},"stripEnclosures":true}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"localizations"}]}}]}}]}},"description":"This transformer will make Shopware config label from Alumio Base Localizations","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-custom-field-set-create-and-send","name":"Shopware - Custom field set - Create and send","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"customFieldSet","value":{"name":"&{code}","config":"&{config}","relations":[{"entityName":"product"}],"customFields":["&{field}"]},"mappers":[]}]}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-check-and-send-custom-field"]}}]}},"description":"This transformer will create custom field set that where the field set will be created.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-check-and-send-custom-field","name":"Shopware - Check and send - Custom field","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"id","value":null,"mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopware-custom-fields","storageKey":"&{code}","destination":"id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":null}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/custom-field-set?_response=detail","method":"POST","payload":"&{customFieldSet}","plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"result.data.id","storage":"shopware-custom-field-sets","storageKey":"&{code}"}},{"meta":[],"prototype":"merger","parameters":{"template":{"resultCustom":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"&{result.data.relationships.customFields.links.related}","payload":[],"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"resultCustom.data.0.id","storage":"shopware-custom-fields","storageKey":"&{code}"}}],"elseTransformers":[{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/custom-field/&{id}","method":"PATCH","payload":{"config":"&{field.config}"},"plugins":[],"payloadType":"data","authentications":[]},"deserializer":{"prototype":"plain-text","parameters":{"property":"test","encodeInput":false}}}}]}}]}},"description":"This transformer will check custom field from previous iteration and decided to create a new one of update existing.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-custom-fields","name":"Shopware - Custom fields - Code to id","object":{"parameters":{"path":"shopware-custom-fields-01KB5JEXARG9H55NCRBJKEFAQV","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-custom-field-sets","name":"Shopware - Custom field sets - Code to id","object":{"parameters":{"path":"shopware-custom-field-sets-01KB1TKHQVVW0WFHQCYZ725ZQZ","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"shopware6-http-client","name":"Shopware6 - HTTP Client","object":{"prototype":"shopware6-v2-http-client","parameters":{"key":"","baseUrl":"${SHOPWARE6_BASE_URL}","advanced":{"client":"default"},"clientId":"${SHOPWARE6_CLIENT_ID}","clientSecret":"${SHOPWARE6_CLIENT_SECRET}","enableLogging":true,"authenticationType":"client_credentials"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"default","name":"Default client","object":{"parameters":{"plugins":[{"prototype":"logger","parameters":{"formatter":"long"}}]}}}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client-test","identifier":"shopware6-http-client--http-client-test","name":"shopware6-http-client http-client Test","object":{"parameters":{"uri":"/api/product","method":"GET"}},"description":null,"owner":"shopware6-http-client","disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-prepare-convert-translations-from-alumio-base-localizations","name":"Shopware - Prepare convert - Translations - from Alumio Base localizations","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localizations.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopware-locale-code-to-id","storageKey":"&{localeCode}","destination":"localeId"}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"localizations","conditions":[],"replacement":"translations"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"translations"}},"nodeFilters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localeId"}},"conditions":[{"prototype":"not-empty","parameters":[]}]}}],"nodeTransformers":[]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"structure","parameters":{"key":"localeId","keys":[],"root":"translations","value":"translation"}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"translations"}},"stripEnclosures":true}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"translations.*","conditions":[],"replacement":"translations.$1.name"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"translations"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"name","conditions":[],"replacement":"metaTitle"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"shopId","value":"${SHOPWARE6_SHOP_ID}","mappers":[]}]}}]}}]}},"description":"Create Shopware translations from Alumio base localizations.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-locale-code-to-id","name":"Shopware - Locale - Code to id","object":{"parameters":{"path":"shopware-locale-code-to-id-01KABB0XTCX5Y5WMBG764AACZT","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-prepare-convert-property-group-options-from-alumio-base-attribute-options","name":"Shopware - Prepare convert - Property Group Options - From Alumio Base Attribute Options","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"parent":"&{code}"},"childrenPattern":"options.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"options.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-prepare-convert-translations-from-alumio-base-localizations"]}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"option","value":{"name":"&{code}","translations":"&{translations}"},"mappers":[]}]}}]}}]}},"description":"Preparing Shopware property group options from Alumio base attribute options.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-convert-property-group-from-alumio-base-attribute","name":"Shopware - Convert - Property group - from Alumio Base Attribute","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"propertyGroup","value":{"name":"&{code}","filterable":true,"displayType":"text","sortingType":"alphanumeric","translations":"&{translations}","visibleOnProductDetailPage":true},"mappers":[]}]}}]}},"description":"This transformer will convert property group from Alumio base attributes and previous preparation.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-check-and-send-property-group","name":"Shopware - Check and send - Property group","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"id","value":null,"mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopware-property-groups","storageKey":"&{code}","destination":"id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":null}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/property-group?_response=detail","method":"POST","payload":"&{propertyGroup}","plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"result.data.id","storage":"shopware-property-groups","storageKey":"&{code}"}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"parentId":"&{result.data.id}"},"childrenPattern":"options.*"}}],"elseTransformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/property-group/&{id}","method":"PATCH","payload":"&{propertyGroup}","plugins":[],"payloadType":"data","authentications":[]},"deserializer":{"prototype":"plain-text","parameters":{"property":"test","encodeInput":false}}}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"parentId":"&{id}"},"childrenPattern":"options.*"}}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"options"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopware-check-and-send-property-group-option"]}}]}}]}},"description":"This transformer will check property group from previous iteration and decided to create a new one of update existing.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-property-groups","name":"Shopware - Property groups - Code to id","object":{"parameters":{"path":"shopware-property-groups-01KB56VZMNKN2M5CS85VX34HTZ","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-check-and-send-property-group-option","name":"Shopware - Check and send - Property group option","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"id","value":null,"mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopware-property-group-options","storageKey":"&{parent}::&{code}","destination":"id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":null}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/property-group/&{parentId}/options?_response=detail","method":"POST","payload":"&{option}","plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"result.data.id","storage":"shopware-property-group-options","storageKey":"&{parent}::&{code}"}}],"elseTransformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/property-group-option/&{id}","method":"PATCH","payload":"&{option}","plugins":[],"payloadType":"data","authentications":[]},"deserializer":{"prototype":"plain-text","parameters":{"property":"test","encodeInput":false}}}}}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-property-group-options","name":"Shopware - Property group - Options - Attribute and Option code to id","object":{"parameters":{"path":"shopware-property-group-options-01KB59PZH1SXQ3TVDWES3VKQDN","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}