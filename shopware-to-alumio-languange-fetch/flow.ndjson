{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"shopware-fetch-language","name":"Shopware - Fetch - Language","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"client":"shopware6-http-client","request":{"uri":"/api/language","payload":"&{@}","plugins":[],"payloadType":"data","authentications":[]},"pagination":{"prototype":"next"},"deserializer":{"prototype":"json","parameters":{"pattern":"data","readMethod":"wholeFile","encodeInput":false}},"requestListeners":[]}},"transformers":["shopware-fetch-locale","shopware-update-storage-locale"]}},"description":"To ensure accurate multilingual data synchronization between Akeneo and Shopware, it is essential to fetch the list of languages configured in Shopware and map them against the locale codes defined in Akeneo. Shopware identifies languages using UUID-based language IDs, while Akeneo uses ISO locale codes such as en_US, de_DE, or fr_FR. Because these systems use different identifiers, the integration must first retrieve all languages from Shopware via the Admin API (GET /api/language) and read the associated locale.code value. Once the Shopware locale code is obtained, it can be matched with Akeneo\u2019s locale code, allowing the integration to send translated data under the correct languageId in Shopware\u2019s translations payload. Without this incoming configuration, translations from Akeneo cannot be correctly aligned with the corresponding languages in Shopware.\n\nThis Incoming would need to be run once before any Sync happened between both system or whenever there a new language added into Shopware system.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"shopware6-http-client","name":"Shopware6 - HTTP Client","object":{"prototype":"shopware6-v2-http-client","parameters":{"key":"","baseUrl":"${SHOPWARE6_BASE_URL}","advanced":{"client":"default"},"clientId":"${SHOPWARE6_CLIENT_ID}","clientSecret":"${SHOPWARE6_CLIENT_SECRET}","enableLogging":true,"authenticationType":"client_credentials"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"default","name":"Default client","object":{"parameters":{"plugins":[{"prototype":"logger","parameters":{"formatter":"long"}}]}}}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client-test","identifier":"shopware6-http-client--http-client-test","name":"shopware6-http-client http-client Test","object":{"parameters":{"uri":"/api/product","method":"GET"}},"description":null,"owner":"shopware6-http-client","disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-fetch-locale","name":"Shopware - Fetch - Locale","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"locale":"&{@}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"shopware6-http-client","request":{"uri":"&{relationships.locale.links.related}","payload":[],"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"localeCode","value":"&{locale.data[0].attributes.code || ``}","mappers":[{"prototype":"string-replace","parameters":{"search":"-","replace":"_"}}]}]}}]}},"description":"This transformer will fetch Shopware locale for getting the locale code.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopware-update-storage-locale","name":"Shopware - Update storage - Locale","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}},{"prototype":"not-equals","parameters":{"value":null}}]}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localeCode"}},"conditions":[{"prototype":"not-equals","parameters":{"value":[]}},{"prototype":"not-equals","parameters":{"value":null}}]}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"id","storage":"shopware-locale-code-to-id","storageKey":"&{localeCode}"}}],"elseTransformers":[]}}]}},"description":"This transformer will update Alumio storage with Shopware locale id base on the locale code.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopware-locale-code-to-id","name":"Shopware - Locale - Code to id","object":{"parameters":{"path":"shopware-locale-code-to-id-01KABB0XTCX5Y5WMBG764AACZT","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}